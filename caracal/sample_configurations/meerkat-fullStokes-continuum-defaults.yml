schema_version: 1.0.3

general:
  prefix: mypipelinerun

getdata:
  dataid: ['MS']

obsconf:
  target:
    - all
  fcal:
    - longest
  bpcal:
    - longest
  gcal:
    - all
  xcal:
    - 'J0521+1638'
  refant: 'm008'

transform:
  enable: true
  field: calibrators
  label_out: cal
  split_field:
    enable: true
    col: data

prep:
  enable: true
  label_in: cal
  field: calibrators
  specweights:
    enable: true
    mode: uniform

flag:
  enable: true
  field: calibrators
  label_in: cal
  flag_shadow:
    enable: true
  flag_autocorr:
    enable: true
  flag_rfi:
    enable: true
    flagger: tfcrop

crosscal:
  enable: true
  label_in: cal
  primary:
    plotgains: true
  secondary:
    plotgains: true
  apply_cal:
    applyto:
      - gcal
      - bpcal
  report: true

inspect:
  label_in: cal
  label_plot: 1gc
  dirname: crosscal
  enable: true
  standard_plotter: ragavi_vis

polcal:
  enable: true
  label_in: cal
  label_cal: 1pcal
  otfcal:
    enable: true
    label_cal: 1kgb
  extendflags: true
  feed_angle_rotation: '-90'
  uvrange: '>150'
  reuse_existing_tables: false
  pol_calib: xcal
  leakage_calib: fcal
  gain_solint: '60s'
  time_solint: 'inf'
  plotgains: true
  apply_pcal: true
  applyto:
    - gcal
    - bpcal
    - xcal

inspect_polcal:
  label_in: cal
  label_plot: 1pcal
  dirname: polcal
  enable: true
  standard_plotter: ragavi_vis

transform__2:
  enable: true
  label_out: corr
  field: target
  split_field:
    enable: true
    col: corrected
    otfcal:
      enable: true
      label_cal: 1kgb
      label_pcal: 1pcal

prep__2:
  enable: true
  label_in: corr
  field: target
  specweights:
    enable: true
    mode: uniform

flag__2:
  enable: true
  field: target
  label_in: corr
  flag_rfi:
    enable: true
    col: DATA
    flagger: aoflagger
    aoflagger:
      strategy: firstpass_QUV.rfis

mask:
  enable: false

selfcal:
  enable: true
  img_npix: 4096
  img_cell: 1.3
  cal_timeslots_chunk: 15
  image:
    enable: true
  calibrate:
    enable: true
    gsols_timeslots: [15]
  transfer_model:
    enable: false
