type: map
mapping:
  rmsynthesis:
    type: map
    desc: make convolved images and/or PB images.
    mapping:
      enable:
        type: bool
        desc: Perform RM-synthesis and RM-CLEAN on QU-cubes
        required: false
        example: 'false'
        default: false
      ncpus:
        type: int
        required: false
        example: '8'
        default: 8
      label_in:
        type: str
        desc: Label of the input dataset
      cubes:
        type: map
        desc: Cubes to use for rm-synthesis. If unspecified, CARACal will use the autogenerated cubes if they are available.
        mapping:
          enable:
            type: bool
            desc: Enable specification for custom cubes to be used
            required: false
            example: 'false'
          i_cube:
            type: str
            desc: "Not required for RM-synthesis but could be specified"
            required: false
          q_cube:
            type: str
            desc: "Required for RM-synthesis"
            required: true
          u_cube:
            type: str
            desc: "Required for RM-synthesis"
            required: true
      freq_file:
        type: str
        desc: Text file containing channel frequencies
        required: false
        example: 'freqs.dat'
        default: 'freqs.dat'
      max_phi:
        type: int
        desc: Maximum Faraday depth
        required: true
        example: "100"
      prefix:
        type: str
        desc: Prefix for the output files
        required: false
        example: 'test'
        default: ''
      cabs:
        desc: 'Specifies non-default image versions and/or tags for Stimela cabs. Running with scissors: use with extreme caution.'
        required: false
        seq:
          - type: map
            mapping:
              name:
                type: str
                required: true
                example: 'cabname'
              version:
                type: str
                required: false
                example: ''
              tag:
                type: str
                required: false
                example: ''
      report:
        type: bool
        required: false
        desc: (Re)generate a full HTML report at the end of this worker.
        example: 'False'