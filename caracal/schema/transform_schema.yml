type: map
mapping:
  schema_version:
    type: str
    required: true

  transform:
    desc: Split, average and/or calibrate the data.
    type: map
    mapping:
      enable:
        desc: Execute the transform worker.
        type: bool
        required: true
        example: 'True'
      label_in:
        desc: Label of the input dataset.
        type: str
        required: false
        example: ''
      label_out:
        desc: Label of the output dataset.
        type: str
        required: false
        example: 'corr' 
      rewind_flags:
        desc: Rewind flags to specified version.
        type: map
        mapping:
          enable:
            type: bool
            desc: Enable segment 'rewind_flags'.
            example: 'False'
            required: false
          version: 
            type: str
            desc: Flag version to restore. Note that all flag versions saved after this version will be deleted.
            example: 'INSERT_FLAG_VERSION_TO_BE_RESTORED'
            required: false

      split_field:
        desc: Make new MS of targets or calibrators.
        type: map
        mapping:
          enable:
            desc: Execute segment 'split_field'.
            type: bool
            required: false
            example: 'True'
          field:
            desc: Fields to be split off from the input MS. Options are (separately) 'target', 'calibrators', 'bpcal', 'gcal' and 'fcal'. Also valid is any combination of 'bpcal', 'gcal' and 'fcal' in a comma-separated string (e.g. 'bpcal, fcal').
            type: str
            required: false
            example: 'target'
          time_average:
            desc: Apply time averaging to the data.
            type: str
            required: false
            example: ''
          freq_average:
            desc: Apply frequency averaging to the data.
            type: int
            required: false
            example: '1'
          column:
            desc: Column to be split, default is 'corrected'. 
            type: str
            required: false
            example: 'corrected'
          correlation:
            desc: Select correlations.
            type: str
            required: false
            example: ''
          usewtspectrum:
            desc: Create a WEIGHT_SPECTRUM column in the output MS.
            type: bool
            required: false
            example: 'True'
          spw:
            desc: Select spectral windows and channels.
            type: str
            required: false
            example: ''

          otfcal:
            desc: Apply on-the-fly (OTF) calibration.
            type: map
            mapping:
              enable:
                desc: Execute segment 'otfcal'.
                type: bool
                required: false
                example: 'False'
              callib:
                desc: Name of the callib file to be used, if user has their own.
                type: str
                required: false
                example: ''
              label_cal:
                desc: Label of calibration tables to be used.
                type: str
                required: false
                example: '1gc1'

      changecentre:
        desc: Change the phase centre.
        type: map
        mapping:
          enable:
            desc: Execute segment 'changecentre'.
            type: bool
            required: false
            example: 'False'
          ra:
            desc: J2000 RA of the new phase centre, in the format XXhXXmXX.XXs .
            type: str
            required: false
            example: '0h0m0.0s'
          dec:
            desc: J2000 Dec of the new phase centre, in the format XXdXXmXX.XXs .
            type: str
            required: false
            example: '0d0m0.0s'

      obsinfo:
        desc: Get observation information.
        type: map
        mapping:
          enable:
            desc: Execute segment 'obsinfo'.
            type: bool
            required: false
            example: 'True'
          listobs:
            desc: Run the CASA 'listobs' task to get observation information.
            type: bool
            required: false
            example: 'True'
          summary_json:
            desc: Run the MSUtils summary function to get observation information written as a JSON file.
            type: bool
            required: false
            example: 'True'
