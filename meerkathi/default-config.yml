## Default meerkathi pipeline configuration

# General pipeline information, data IDs, prefixes for output
general:
  dataids: ["1491463063","1491480644"] # change me!
  data_paths: [/var/kat/archive2/data/MeerKATAR1/telescope_products/2017/04/06, # change me!
              /var/kat/archive2/data/MeerKATAR1/telescope_products/2017/04/06]  # change me!
  prefix: [meerkathi-pipeline]
  msdir: msdir
  input: input
  output: output
  bpcal: [0]  # change me!
  gcal: [1]   # change me!
  target: [2] # change me!
  reference_antenna: [m006] # change me!


# Get data to be reduced
# and peform some basic operations to get it ready for reduction
get_data:
  enable: true
  order: 1
  h5toms:
    enable: true
    channel_range: "20701,21700"
  fixvis:
    enable: true
  obsinfo:
    enable: true
  prepms:
    enable: true
    add_imaging_cols: true

# Pre-calibration flagging
precal_flagging:
  enable: false
  order: 2
  flag_autocorr:
    enable: true
  flag_milkyway:
    enable: true
    channels: "*:1419.8~1421.3MHz"
  autoflag:
    enable: true
    strategy: aoflagger_strategies/firstpass_HI_strat2.rfis # This has to be in the pipeline input folder

# First generation calibration
first_gen_cal:
  enable: false
  order: 3
  uvrange: ">50"
  set_model:
    enable: true
    standard: "Perley-Taylor 99"
  delay_cal:
    enable: true
    refant: m042
  bp_cal:
    enable: true
    combine: ""
    minnrbl: 4
    minsnr: 3
    solnorm: true
  gain_cal_bp:
    enable: true
    combine: ""
    minnrbl: 4
    minsnr: 3
    solnorm: true
  gain_cal_gain:
    enable: true
    combine: ""
    minnrbl: 4
    minsnr: 3
    solnorm: true
  transfer_fluxscale:
    enable: true
  apply_delay_cal:
    enable: true
    applymode: calflag
  apply_bp_cal:
    enable: true
    applymode: calflag
  apply_gain_cal_bp:
    enable: true
    applymode: calflag
  apply_transfer_fluxscale:
    enable: true
    applymode: calflag
  make_plots:
    enable: true
    bandpass: true
    fluxscale: true
    gain_cal: true
    bandpass_reim: true
