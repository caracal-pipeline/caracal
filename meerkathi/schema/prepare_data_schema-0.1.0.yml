type: map
mapping:
  schema_version:
    type: str
    required: true

  prepare_data:
    desc: Prepare the data for calibration and imaging.
    type: map
    mapping:
      enable:
        desc: Executes the data preparation step.
        type: bool
        required: true

      fixvis:
        desc: Fixes the UVW coordinates through the CASA task fixvis.
        type: map
        mapping:
          enable:
            desc: Enable execution of fixvis.
            type: bool
            required: false

      manage_flags:
        desc: Manage MS flags
        type: map
        mapping:
          enable: 
            desc: enable this section
            type: bool
            required: false
          add_bitflag_column:
            desc: Add BITFLAG and BITFLAG_ROW columns
            type: bool
            required: false
          init_legacy_flagset:
            desc: Save all current flags in a legacy flagset if it does not exist
            type: bool
            required: false
          remove_flagsets:
            desc: Remove all existing flagsets, except legacy flags
            type: bool
            required: false

      prepms:
        desc: Run a sequence of opertations to prepare the MS for the pipeline
        type: map
        mapping: 
          enable: 
            desc: Enable this section
            type: bool
            required: false

      add_spectral_weights: 
        desc: Add spectral weights column to the measurement set.
        type: map
        mapping: 
          enable: 
            desc: Enables addition of spectral weights column to the measurement set.
            type: bool
            required: false
