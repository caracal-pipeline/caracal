type: map
mapping:
  schema_version:
    type: str
    required: true

  prepare_data:
    desc: Prepare the data for calibration and imaging.
    type: map
    mapping:
      enable:
        desc: Executes the data preparation step.
        type: bool
        required: true
        example: 'False'
      fixvis:
        desc: Fixes the UVW coordinates through the CASA task fixvis.
        type: map
        mapping:
          enable:
            desc: Enable execution of fixvis.
            type: bool
            required: false
            example: 'False'            
      manage_flags:
        desc: Manage MS flags
        type: map
        mapping:
          enable: 
            desc: enable this section
            type: bool
            required: false
            example: 'true'
          add_bitflag_column:
            desc: Add BITFLAG and BITFLAG_ROW columns
            type: bool
            required: false
            example: 'true'
          init_legacy_flagset:
            desc: Save all current flags in a legacy flagset if it does not exist
            type: bool
            required: false
            example: 'true'
          remove_flagsets:
            desc: Remove all existing flagsets, except legacy flags
            type: bool
            required: false
            example: 'true'
      add_spectral_weights: 
        desc: Add spectral weights column to the measurement set.
        type: map
        mapping: 
          enable: 
            desc: Enables addition of spectral weights column to the measurement set.
            type: bool
            required: false
            example: 'false'
          weight_columns:
            seq:
              - type: str
            desc: column names
            required: false
            example: 'WEIGHT, WEIGHT_SPECTRUM'
          noise_columns:
            seq:
              - type: str
            desc: column names for noise
            required: false
            example: 'SIGMA, SIGMA_SPECTRUM'
          write_to_ms:
            desc: write columns to file
            type: bool
            required: false
            example: 'true'
          stats_data:
            desc: which statistics for the file.
            type: str
            required: false
            example: 'use_package_meerkat_spec'
