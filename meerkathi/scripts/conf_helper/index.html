<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>MeerKATHI Configuration Editor</title>
		<script src="javascript/js-yaml/dist/js-yaml.js"></script>
		<script src="javascript/model_parameterfile.js"></script>
		<script src="javascript/viewer_consoleviewer.js"></script>
		<script src="javascript/viewer_outline.js"></script>
		<link rel="stylesheet" href="css/default.css">
		<script type="text/javascript">
			if (!(window.File && window.FileReader && window.FileList && window.Blob)) {
				alert('The File APIs are not fully supported in this browser.');
			}
			function getQueryVariable(variable) {
				/* 
				 * Ref: http://www.idealog.us/2006/06/javascript_to_p.html
				 * Return querystring variable if exists, null otherwise
				 *
                                 */
				var query = window.location.search.substring(1);
				var vars = query.split('&');
				for (var i = 0; i < vars.length; i++) {
					var pair = vars[i].split('=');
					if (decodeURIComponent(pair[0]) == variable)
						return decodeURIComponent(pair[1]);
				}
				return null;
			}
		</script>
	</head>
	<body>
		<div id="div_filebrowse">
			<form id="frm_filebrowse">
				<input type="file" class="browser" value="atob(getQueryVariable(\"file\"))" id="ofd_yamlbrowser" onchange="on_load_file(this);" />
			</form>
		</div>
		<script>
			var paramfile = new parameter_file();
			var adebuglog = new console_viewer();
			var oview = new outline_viewer();
			paramfile.register_viewer(adebuglog);
			paramfile.register_viewer(oview);
			function on_load_file(e){
				var file, fr;
				if (!e.files[0]) {
					alert("Please select a file");
				} else {
					paramfile.load(e.files[0]);
				}
				return false;
			}
		</script>
	</body>
</html>
